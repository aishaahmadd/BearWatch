<!--
------THIS IS THE STOCK PAGE------
11 sections:
1. Logo = div id = "logo"
2. Search Engine = div id = "search"
3. Buttons (Trends) = div id = "trend buttons"
4. Graph = div id = "graph"
5. Headlines = div id = "headlines"
6. Trending (has graphs... will have to figure out) = div id = "trending"
7. Buttons (time) = div id = "time buttons"
8. Stats = div id = "stats"
9. Stock Information = div id = "information"
10. Stock Headlines = div id = "stock headline"
11. Related Stocks = div id = "related stocks"
-->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>BearWatch</title>
        <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <!--LOGO-->
        <div id = "logo">
            <img src="{{ url_for('static', filename='BearWatchLogo.png') }}" alt="BearWatch Logo">
        </div>

        <!--SEARCH-->
        <div id="search">
            <form action="/" method="GET">
                <input id="stock-input" name="stock" type="text" placeholder="Enter stock symbol" required>
                <button id="submit-button" type="submit">Submit</button>
            </form>
        </div>

        <!--TREND BUTTONS-->
        <div id = "trend buttons">
            <button></button>
            <button></button>
            <button></button>
            <button></button>
            <button></button>
            <button></button>
            <button></button>
        </div>

        <!--GRAPH-->
        <iframe id="stock-graph" src="/dashboard?stock={{ stock_symbol }}" width="100%" height="600px" style="border:none;"></iframe>

        <!--TIME BUTTONS-->
        <div id = "time buttons">
            <button>1D</button>
            <button>1W</button>
            <button>1M</button>
            <button>3M</button>
            <button>YTD</button>
            <button>1Y</button>
            <button>ALL</button>
        </div>

        <!--HEADLINES-->
        <div id = "headlines">
            <h2><a href ="news.html">Headlines</a></h2>
        </div>

        <!--STOCK HEADLINES-->
        <div id = "stock headlines">
            <h2><a href ="news.html">Stock Headlines</a></h2>
        </div>

        <!--TRENDING-->
        <div id = "trending">
            <h2>Trending</h2>
        </div>

        <!--Related Stocks-->
        <div id = "related stocks">
            <h2>Similar Stocks</h2>
        </div>

        <!--INFO-->
        <div id = "information">

        </div>

        <!--Stats-->
        <div id = "stats">

        </div>

        <!--pass the stock symbol as a URL parameter-->
        <script> 
            // Function to get query parameters from the URL
            function getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }
        
            // Get stock symbol from the URL
            const stockSymbol = getQueryParam("stock");
        
            if (stockSymbol) {
                // Update the stock graph iframe source dynamically
                document.getElementById("stock-graph").src = `/dashboard?stock=${stockSymbol}`;
                
                // Show the stock symbol on the page
                const overviewDiv = document.getElementById("overview");
                overviewDiv.innerHTML = `<h2>Stock Overview: ${stockSymbol.toUpperCase()}</h2>`;
            } else {
                document.getElementById("overview").innerHTML = "<h2>No stock selected</h2>";
            }
        </script>
        
    </body>
</html>