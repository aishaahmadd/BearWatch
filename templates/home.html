<!--
------THIS IS THE HOME PAGE------
9 sections:
1. Logo = div id = "logo"
2. Search Engine = div id = "search"
3. Buttons (Trends) = div id = "trend buttons"
4. Graph = div id = "graph"
5. Headlines = div id = "headlines"
6. Trending (has graphs... will have to figure out) = div id = "trending"
7. Buttons (time) = div id = "time buttons"
8. Info = div id = "info"
9. Overview = div = "overview"
-->

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>BearWatch</title>
        <link href="{{ url_for('static', filename='home.css') }}" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <!--LOGO-->
        <div id = "logo">
            <img src="{{ url_for('static', filename='BearWatchLogo.png') }}" alt="BearWatch Logo">
        </div>

        <!-- DARK MODE BUTTON -->
        <div id="dark-mode-toggle">
            <button id="dark-mode-button">Toggle Dark Mode</button>
        </div>

        <!--SEARCH-->
        <div id="search">
            <form action="/stock" method="GET">
                <input id="stock-input" name="stock" type="text" placeholder="Enter stock symbol" required>
                <button id="submit-button" type="submit">Submit</button>
            </form>
        </div>

        <!--GRAPH-->
        <div id="graph">
            <iframe id="stock-graph" src="/home?time=1d" width="100%" height="600px" style="border:none;"></iframe>

        </div>

        <!--TIME BUTTONS-->
        <div id = "time-buttons">
            <button data-value="1d">1D</button>
            <button data-value="1w">1W</button>
            <button data-value="1mo">1M</button>
            <button data-value="3mo">3M</button>
            <button data-value="ytd">YTD</button>
            <button data-value="1y">1Y</button>
            <button data-value="max">ALL</button>
        </div>

        <!--HEADLINES-->
        <div id = "headlines">
            <h2><a href ="news.html">Headlines</a></h2>
        </div>

        <!--TRENDING-->
        <div id = "trending">
            <h2>Trending</h2>
        </div>

        <!--INFO-->
        <div id = "info">

        </div>

        <!--OVERVIEW-->
        <div id = "overview">

        </div>

        <script>
            const toggleButton = document.getElementById('dark-mode-button');
        
            toggleButton.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
            });
        </script>

        <!--SCRIPT TO HANDLE BUTTON CLICKS-->
        <script>
            const iframe = document.getElementById("stock-graph");
            const buttons = document.querySelectorAll("#time-buttons button");

            buttons.forEach(button => {
                button.addEventListener("click", () => {
                    const timeValue = button.getAttribute("data-value");

                    // Preserve other query parameters like colorblind
                    const url = new URL(iframe.src, window.location.origin);
                    url.searchParams.set("time", timeValue);

                    iframe.src = url.toString();
                });
            });
        </script>
    </body>
</html>